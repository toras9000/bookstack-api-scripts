#!/usr/bin/env -S dotnet run --file
#:package Lestaly.General@0.114.0
using Lestaly;

public record SettingsDocker(FileInfo Compose);
public record SettingsDatabase(ushort Port, string Host, string Username, string Password, string Database);
public record SettingsBookStack(Uri Url, SettingsBookStackApi Api);
public record SettingsBookStackApi(Uri Endpoint, string TokenName, string TokenId, string TokenSecret);

public class Settings(DirectoryInfo contextDir)
{
    public SettingsDocker Docker { get; } = new
    (
        Compose: contextDir.RelativeFile("./docker/compose.yml")
    );

    public SettingsDatabase Database { get; } = new
    (
        Port: 9985,
        Host: "localhost",
        Username: "bookstack_user",
        Password: "bookstack_pass",
        Database: "bookstack_store"
    );

    public SettingsBookStack BookStack { get; } = new
    (
        Url: new(@"http://localhost:9986/"),
        Api: new
        (
            Endpoint: new(@"http://localhost:9986/api/"),
            TokenName: "TestToken",
            TokenId: "00001111222233334444555566667777",
            TokenSecret: "88889999aaaabbbbccccddddeeeeffff"
        )
    );
};
